//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ../pdfreporter-core/src/org/oss/pdfreporter/engine/export/GenericElementHandlerEnviroment.java
//

#include "IOSClass.h"
#include "J2ObjC_source.h"
#include "java/util/HashMap.h"
#include "java/util/Iterator.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "org/oss/pdfreporter/engine/DefaultJasperReportsContext.h"
#include "org/oss/pdfreporter/engine/JRGenericElementType.h"
#include "org/oss/pdfreporter/engine/JRRuntimeException.h"
#include "org/oss/pdfreporter/engine/JasperReportsContext.h"
#include "org/oss/pdfreporter/engine/export/GenericElementHandler.h"
#include "org/oss/pdfreporter/engine/export/GenericElementHandlerBundle.h"
#include "org/oss/pdfreporter/engine/export/GenericElementHandlerEnviroment.h"
#include "org/oss/pdfreporter/extensions/ExtensionsEnvironment.h"
#include "org/oss/pdfreporter/uses/org/apache/commons/collections/ReferenceMap.h"

@interface OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment () {
 @public
  OrgOssPdfreporterUsesOrgApacheCommonsCollectionsReferenceMap *handlersCache_;
  id<OrgOssPdfreporterEngineJasperReportsContext> jasperReportsContext_;
}

- (instancetype)initWithOrgOssPdfreporterEngineJasperReportsContext:(id<OrgOssPdfreporterEngineJasperReportsContext>)jasperReportsContext;

+ (OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *)getDefaultInstance;

@end

J2OBJC_FIELD_SETTER(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment, handlersCache_, OrgOssPdfreporterUsesOrgApacheCommonsCollectionsReferenceMap *)
J2OBJC_FIELD_SETTER(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment, jasperReportsContext_, id<OrgOssPdfreporterEngineJasperReportsContext>)

__attribute__((unused)) static void OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *self, id<OrgOssPdfreporterEngineJasperReportsContext> jasperReportsContext);

__attribute__((unused)) static OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *new_OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(id<OrgOssPdfreporterEngineJasperReportsContext> jasperReportsContext) NS_RETURNS_RETAINED;

__attribute__((unused)) static OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *create_OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(id<OrgOssPdfreporterEngineJasperReportsContext> jasperReportsContext);

__attribute__((unused)) static OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getDefaultInstance();

@implementation OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment

- (instancetype)initWithOrgOssPdfreporterEngineJasperReportsContext:(id<OrgOssPdfreporterEngineJasperReportsContext>)jasperReportsContext {
  OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(self, jasperReportsContext);
  return self;
}

+ (OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *)getDefaultInstance {
  return OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getDefaultInstance();
}

+ (OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *)getInstanceWithOrgOssPdfreporterEngineJasperReportsContext:(id<OrgOssPdfreporterEngineJasperReportsContext>)jasperReportsContext {
  return OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getInstanceWithOrgOssPdfreporterEngineJasperReportsContext_(jasperReportsContext);
}

- (id<OrgOssPdfreporterEngineExportGenericElementHandler>)getElementHandlerWithOrgOssPdfreporterEngineJRGenericElementType:(OrgOssPdfreporterEngineJRGenericElementType *)type
                                                                                                              withNSString:(NSString *)exporterKey {
  id<JavaUtilMap> handlerBundles = [self getBundles];
  id<OrgOssPdfreporterEngineExportGenericElementHandlerBundle> bundle = [((id<JavaUtilMap>) nil_chk(handlerBundles)) getWithId:[((OrgOssPdfreporterEngineJRGenericElementType *) nil_chk(type)) getNamespace]];
  if (bundle == nil) {
    @throw new_OrgOssPdfreporterEngineJRRuntimeException_initWithNSString_(JreStrcat("$$", @"No generic element handlers found for namespace ", [type getNamespace]));
  }
  return [bundle getHandlerWithNSString:[type getName] withNSString:exporterKey];
}

- (id<JavaUtilMap>)getBundles {
  id cacheKey = OrgOssPdfreporterExtensionsExtensionsEnvironment_getExtensionsCacheKey();
  id<JavaUtilMap> handlerBundles;
  @synchronized(handlersCache_) {
    handlerBundles = (id<JavaUtilMap>) cast_check([((OrgOssPdfreporterUsesOrgApacheCommonsCollectionsReferenceMap *) nil_chk(handlersCache_)) getWithId:cacheKey], JavaUtilMap_class_());
    if (handlerBundles == nil) {
      handlerBundles = [self loadBundles];
      (void) [handlersCache_ putWithId:cacheKey withId:handlerBundles];
    }
  }
  return handlerBundles;
}

- (id<JavaUtilMap>)loadBundles {
  id<JavaUtilList> bundleList = [((id<OrgOssPdfreporterEngineJasperReportsContext>) nil_chk(jasperReportsContext_)) getExtensionsWithIOSClass:OrgOssPdfreporterEngineExportGenericElementHandlerBundle_class_()];
  id<JavaUtilMap> bundles = new_JavaUtilHashMap_init();
  for (id<JavaUtilIterator> it = [((id<JavaUtilList>) nil_chk(bundleList)) iterator]; [((id<JavaUtilIterator>) nil_chk(it)) hasNext]; ) {
    id<OrgOssPdfreporterEngineExportGenericElementHandlerBundle> bundle = [it next];
    NSString *namespace_ = [((id<OrgOssPdfreporterEngineExportGenericElementHandlerBundle>) nil_chk(bundle)) getNamespace];
    if ([bundles containsKeyWithId:namespace_]) {
    }
    else {
      (void) [bundles putWithId:namespace_ withId:bundle];
    }
  }
  return bundles;
}

+ (id<OrgOssPdfreporterEngineExportGenericElementHandler>)getHandlerWithOrgOssPdfreporterEngineJRGenericElementType:(OrgOssPdfreporterEngineJRGenericElementType *)type
                                                                                                       withNSString:(NSString *)exporterKey {
  return OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getHandlerWithOrgOssPdfreporterEngineJRGenericElementType_withNSString_(type, exporterKey);
}

+ (id<JavaUtilMap>)getHandlerBundles {
  return OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getHandlerBundles();
}

+ (id<JavaUtilMap>)loadHandlerBundles {
  return OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_loadHandlerBundles();
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initWithOrgOssPdfreporterEngineJasperReportsContext:", "GenericElementHandlerEnviroment", NULL, 0x2, NULL, NULL },
    { "getDefaultInstance", NULL, "Lorg.oss.pdfreporter.engine.export.GenericElementHandlerEnviroment;", 0xa, NULL, NULL },
    { "getInstanceWithOrgOssPdfreporterEngineJasperReportsContext:", "getInstance", "Lorg.oss.pdfreporter.engine.export.GenericElementHandlerEnviroment;", 0x9, NULL, NULL },
    { "getElementHandlerWithOrgOssPdfreporterEngineJRGenericElementType:withNSString:", "getElementHandler", "Lorg.oss.pdfreporter.engine.export.GenericElementHandler;", 0x1, NULL, NULL },
    { "getBundles", NULL, "Ljava.util.Map;", 0x4, NULL, "()Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/export/GenericElementHandlerBundle;>;" },
    { "loadBundles", NULL, "Ljava.util.Map;", 0x4, NULL, "()Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/export/GenericElementHandlerBundle;>;" },
    { "getHandlerWithOrgOssPdfreporterEngineJRGenericElementType:withNSString:", "getHandler", "Lorg.oss.pdfreporter.engine.export.GenericElementHandler;", 0x9, NULL, NULL },
    { "getHandlerBundles", NULL, "Ljava.util.Map;", 0xc, NULL, "()Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/export/GenericElementHandlerBundle;>;" },
    { "loadHandlerBundles", NULL, "Ljava.util.Map;", 0xc, NULL, "()Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/export/GenericElementHandlerBundle;>;" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "handlersCache_", NULL, 0x12, "Lorg.oss.pdfreporter.uses.org.apache.commons.collections.ReferenceMap;", NULL, NULL, .constantValue.asLong = 0 },
    { "jasperReportsContext_", NULL, 0x2, "Lorg.oss.pdfreporter.engine.JasperReportsContext;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment = { 2, "GenericElementHandlerEnviroment", "org.oss.pdfreporter.engine.export", NULL, 0x11, 9, methods, 2, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment;
}

@end

void OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *self, id<OrgOssPdfreporterEngineJasperReportsContext> jasperReportsContext) {
  NSObject_init(self);
  self->handlersCache_ = new_OrgOssPdfreporterUsesOrgApacheCommonsCollectionsReferenceMap_initWithInt_withInt_(OrgOssPdfreporterUsesOrgApacheCommonsCollectionsReferenceMap_WEAK, OrgOssPdfreporterUsesOrgApacheCommonsCollectionsReferenceMap_HARD);
  self->jasperReportsContext_ = jasperReportsContext;
}

OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *new_OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(id<OrgOssPdfreporterEngineJasperReportsContext> jasperReportsContext) {
  J2OBJC_NEW_IMPL(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment, initWithOrgOssPdfreporterEngineJasperReportsContext_, jasperReportsContext)
}

OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *create_OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(id<OrgOssPdfreporterEngineJasperReportsContext> jasperReportsContext) {
  J2OBJC_CREATE_IMPL(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment, initWithOrgOssPdfreporterEngineJasperReportsContext_, jasperReportsContext)
}

OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getDefaultInstance() {
  OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initialize();
  return new_OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(OrgOssPdfreporterEngineDefaultJasperReportsContext_getInstance());
}

OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getInstanceWithOrgOssPdfreporterEngineJasperReportsContext_(id<OrgOssPdfreporterEngineJasperReportsContext> jasperReportsContext) {
  OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initialize();
  return new_OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initWithOrgOssPdfreporterEngineJasperReportsContext_(jasperReportsContext);
}

id<OrgOssPdfreporterEngineExportGenericElementHandler> OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getHandlerWithOrgOssPdfreporterEngineJRGenericElementType_withNSString_(OrgOssPdfreporterEngineJRGenericElementType *type, NSString *exporterKey) {
  OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initialize();
  return [((OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *) nil_chk(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getDefaultInstance())) getElementHandlerWithOrgOssPdfreporterEngineJRGenericElementType:type withNSString:exporterKey];
}

id<JavaUtilMap> OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getHandlerBundles() {
  OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initialize();
  return [((OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *) nil_chk(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getDefaultInstance())) getBundles];
}

id<JavaUtilMap> OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_loadHandlerBundles() {
  OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_initialize();
  return [((OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment *) nil_chk(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment_getDefaultInstance())) loadBundles];
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgOssPdfreporterEngineExportGenericElementHandlerEnviroment)
