//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ../pdfreporter-core/src/org/oss/pdfreporter/engine/query/coresql/model/AbstractCoreIdentifierType.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/io/IOException.h"
#include "java/util/ArrayList.h"
#include "java/util/Collection.h"
#include "java/util/HashSet.h"
#include "org/oss/pdfreporter/engine/JRException.h"
#include "org/oss/pdfreporter/engine/query/coresql/model/AbstractCoreIdentifierType.h"
#include "org/oss/pdfreporter/engine/query/coresql/model/CoreDto.h"
#include "org/oss/pdfreporter/engine/query/coresql/model/CoreIdentifierType.h"
#include "org/oss/pdfreporter/sql/IConnection.h"
#include "org/oss/pdfreporter/sql/IPreparedStatement.h"
#include "org/oss/pdfreporter/sql/IResultSet.h"
#include "org/oss/pdfreporter/sql/SQLException.h"

#pragma clang diagnostic ignored "-Wprotocol"

@implementation OrgOssPdfreporterEngineQueryCoresqlModelAbstractCoreIdentifierType

- (id<OrgOssPdfreporterEngineQueryCoresqlModelCoreDto>)getHolder {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (id<JavaUtilCollection>)executeIdentfierQueryWithOrgOssPdfreporterSqlIConnection:(id<OrgOssPdfreporterSqlIConnection>)connection
                                                                      withNSString:(NSString *)idValue {
  id<OrgOssPdfreporterSqlIPreparedStatement> s = nil;
  id<OrgOssPdfreporterSqlIResultSet> rs = nil;
  @try {
    s = [((id<OrgOssPdfreporterSqlIConnection>) nil_chk(connection)) prepareStatementWithNSString:NSString_formatWithNSString_withNSObjectArray_(@"select rel.%s from %s holder, %s rel where holder.%s = ? and holder.%s = rel.%s", [IOSObjectArray newArrayWithObjects:(id[]){ [self getValuesColumnName], [((id<OrgOssPdfreporterEngineQueryCoresqlModelCoreDto>) nil_chk([self getHolder])) getTableName], [self getTableName], [self getHolderIdColumnName], [self getHolderIdColumnName], [self getRelationIdColumnName] } count:6 type:NSObject_class_()])];
    [((id<OrgOssPdfreporterSqlIPreparedStatement>) nil_chk(s)) setStringWithInt:1 withNSString:idValue];
    rs = [s executeQuery];
    id<JavaUtilCollection> result = [self getType] == JreLoadEnum(OrgOssPdfreporterEngineQueryCoresqlModelCoreIdentifierType_Type, LIST) ? new_JavaUtilArrayList_init() : new_JavaUtilHashSet_init();
    while ([((id<OrgOssPdfreporterSqlIResultSet>) nil_chk(rs)) next]) {
      [result addWithId:[rs getStringWithInt:1]];
    }
    return result;
  }
  @catch (OrgOssPdfreporterSqlSQLException *e) {
    @throw new_OrgOssPdfreporterEngineJRException_initWithNSException_(e);
  }
  @finally {
    @try {
      [((id<OrgOssPdfreporterSqlIResultSet>) nil_chk(rs)) close];
      [((id<OrgOssPdfreporterSqlIPreparedStatement>) nil_chk(s)) close];
    }
    @catch (JavaIoIOException *e) {
    }
  }
}

- (NSString *)getSelectInClauseWithNSString:(NSString *)holderrAliasName {
  return NSString_formatWithNSString_withNSObjectArray_(@"(select rel.%s from %s rel where rel.%s = %s.%s)", [IOSObjectArray newArrayWithObjects:(id[]){ [self getValuesColumnName], [self getTableName], [self getRelationIdColumnName], holderrAliasName, [self getHolderIdColumnName] } count:5 type:NSObject_class_()]);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgOssPdfreporterEngineQueryCoresqlModelAbstractCoreIdentifierType_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "getHolder", NULL, "Lorg.oss.pdfreporter.engine.query.coresql.model.CoreDto;", 0x404, NULL, NULL },
    { "executeIdentfierQueryWithOrgOssPdfreporterSqlIConnection:withNSString:", "executeIdentfierQuery", "Ljava.util.Collection;", 0x1, "Lorg.oss.pdfreporter.engine.JRException;", "(Lorg/oss/pdfreporter/sql/IConnection;Ljava/lang/String;)Ljava/util/Collection<Ljava/lang/String;>;" },
    { "getSelectInClauseWithNSString:", "getSelectInClause", "Ljava.lang.String;", 0x1, NULL, NULL },
    { "init", "AbstractCoreIdentifierType", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcClassInfo _OrgOssPdfreporterEngineQueryCoresqlModelAbstractCoreIdentifierType = { 2, "AbstractCoreIdentifierType", "org.oss.pdfreporter.engine.query.coresql.model", NULL, 0x401, 4, methods, 0, NULL, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgOssPdfreporterEngineQueryCoresqlModelAbstractCoreIdentifierType;
}

@end

void OrgOssPdfreporterEngineQueryCoresqlModelAbstractCoreIdentifierType_init(OrgOssPdfreporterEngineQueryCoresqlModelAbstractCoreIdentifierType *self) {
  NSObject_init(self);
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgOssPdfreporterEngineQueryCoresqlModelAbstractCoreIdentifierType)
