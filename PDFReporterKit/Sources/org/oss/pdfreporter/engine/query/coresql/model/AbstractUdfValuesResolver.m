//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ../pdfreporter-core/src/org/oss/pdfreporter/engine/query/coresql/model/AbstractUdfValuesResolver.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Boolean.h"
#include "java/lang/Float.h"
#include "java/lang/IllegalArgumentException.h"
#include "java/lang/Integer.h"
#include "java/util/ArrayList.h"
#include "java/util/Collections.h"
#include "java/util/Date.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/logging/Logger.h"
#include "org/oss/pdfreporter/engine/query/coresql/model/AbstractUdfValuesResolver.h"
#include "org/oss/pdfreporter/engine/query/coresql/model/IUdfValueType.h"
#include "org/oss/pdfreporter/sql/IConnection.h"

@interface OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver () {
 @public
  id<JavaUtilList> udfValues_;
  id<JavaUtilMap> udfValuesMap_;
  NSString *currentRawUdfValue_;
}

- (void)assertAndLoadUdfValuesWithOrgOssPdfreporterSqlIConnection:(id<OrgOssPdfreporterSqlIConnection>)connection
                                                     withNSString:(NSString *)rawUdfValue;

@end

J2OBJC_FIELD_SETTER(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver, udfValues_, id<JavaUtilList>)
J2OBJC_FIELD_SETTER(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver, udfValuesMap_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver, currentRawUdfValue_, NSString *)

inline JavaUtilLoggingLogger *OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_get_logger();
static JavaUtilLoggingLogger *OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_logger;
J2OBJC_STATIC_FIELD_OBJ_FINAL(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver, logger, JavaUtilLoggingLogger *)

__attribute__((unused)) static void OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_assertAndLoadUdfValuesWithOrgOssPdfreporterSqlIConnection_withNSString_(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver *self, id<OrgOssPdfreporterSqlIConnection> connection, NSString *rawUdfValue);

J2OBJC_INITIALIZED_DEFN(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver)

@implementation OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

- (id<JavaUtilList>)getUdfValuesWithOrgOssPdfreporterSqlIConnection:(id<OrgOssPdfreporterSqlIConnection>)connection
                                                       withNSString:(NSString *)rawUdfValue {
  OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_assertAndLoadUdfValuesWithOrgOssPdfreporterSqlIConnection_withNSString_(self, connection, rawUdfValue);
  return JavaUtilCollections_unmodifiableListWithJavaUtilList_(udfValues_);
}

- (id<OrgOssPdfreporterEngineQueryCoresqlModelIUdfValueType>)getUdfValueWithOrgOssPdfreporterSqlIConnection:(id<OrgOssPdfreporterSqlIConnection>)connection
                                                                                               withNSString:(NSString *)name
                                                                                               withNSString:(NSString *)rawUdfValue {
  OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_assertAndLoadUdfValuesWithOrgOssPdfreporterSqlIConnection_withNSString_(self, connection, rawUdfValue);
  return [((id<JavaUtilMap>) nil_chk(udfValuesMap_)) getWithId:name];
}

- (void)assertAndLoadUdfValuesWithOrgOssPdfreporterSqlIConnection:(id<OrgOssPdfreporterSqlIConnection>)connection
                                                     withNSString:(NSString *)rawUdfValue {
  OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_assertAndLoadUdfValuesWithOrgOssPdfreporterSqlIConnection_withNSString_(self, connection, rawUdfValue);
}

- (void)discardUdfValues {
  [((id<JavaUtilList>) nil_chk(udfValues_)) clear];
  [((id<JavaUtilMap>) nil_chk(udfValuesMap_)) clear];
  currentRawUdfValue_ = nil;
}

- (void)resolveUdfValuesWithOrgOssPdfreporterSqlIConnection:(id<OrgOssPdfreporterSqlIConnection>)connection {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (void)processRawUdfValueWithNSString:(NSString *)rawUdfValue {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
}

- (NSString *)getUdfValuesColumnNameSuffix {
  // can't call an abstract method
  [self doesNotRecognizeSelector:_cmd];
  return 0;
}

- (NSString *)getRawUdfValue {
  return currentRawUdfValue_;
}

- (void)addUdfValueWithOrgOssPdfreporterEngineQueryCoresqlModelIUdfValueType:(id<OrgOssPdfreporterEngineQueryCoresqlModelIUdfValueType>)udfValue {
  [((JavaUtilLoggingLogger *) nil_chk(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_logger)) finestWithNSString:NSString_formatWithNSString_withNSObjectArray_(@"resolved udf value: %s", [IOSObjectArray newArrayWithObjects:(id[]){ udfValue } count:1 type:NSObject_class_()])];
  [((id<JavaUtilList>) nil_chk(udfValues_)) addWithId:udfValue];
}

- (IOSClass *)resolveTypeWithNSString:(NSString *)typeName {
  IOSClass *resolvedType;
  if ([((NSString *) nil_chk(typeName)) isEqual:@"INT"]) {
    resolvedType = JavaLangInteger_class_();
  }
  else if ([typeName isEqual:@"FLOAT"]) {
    resolvedType = JavaLangFloat_class_();
  }
  else if ([typeName isEqual:@"BOOLEAN"]) {
    resolvedType = JavaLangBoolean_class_();
  }
  else if ([typeName isEqual:@"DATE"]) {
    resolvedType = JavaUtilDate_class_();
  }
  else if ([typeName isEqual:@"SELECTIONLIST"]) {
    resolvedType = JavaUtilList_class_();
  }
  else {
    resolvedType = NSString_class_();
  }
  [((JavaUtilLoggingLogger *) nil_chk(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_logger)) finestWithNSString:NSString_formatWithNSString_withNSObjectArray_(@"resolved type: %s for %s", [IOSObjectArray newArrayWithObjects:(id[]){ resolvedType, typeName } count:2 type:NSObject_class_()])];
  return resolvedType;
}

+ (void)initialize {
  if (self == [OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver class]) {
    OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_logger = JavaUtilLoggingLogger_getLoggerWithNSString_([OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_class_() getName]);
    J2OBJC_SET_INITIALIZED(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "init", "AbstractUdfValuesResolver", NULL, 0x0, NULL, NULL },
    { "getUdfValuesWithOrgOssPdfreporterSqlIConnection:withNSString:", "getUdfValues", "Ljava.util.List;", 0x1, NULL, "(Lorg/oss/pdfreporter/sql/IConnection;Ljava/lang/String;)Ljava/util/List<Lorg/oss/pdfreporter/engine/query/coresql/model/IUdfValueType;>;" },
    { "getUdfValueWithOrgOssPdfreporterSqlIConnection:withNSString:withNSString:", "getUdfValue", "Lorg.oss.pdfreporter.engine.query.coresql.model.IUdfValueType;", 0x1, NULL, NULL },
    { "assertAndLoadUdfValuesWithOrgOssPdfreporterSqlIConnection:withNSString:", "assertAndLoadUdfValues", "V", 0x2, NULL, NULL },
    { "discardUdfValues", NULL, "V", 0x1, NULL, NULL },
    { "resolveUdfValuesWithOrgOssPdfreporterSqlIConnection:", "resolveUdfValues", "V", 0x400, NULL, NULL },
    { "processRawUdfValueWithNSString:", "processRawUdfValue", "V", 0x400, NULL, NULL },
    { "getUdfValuesColumnNameSuffix", NULL, "Ljava.lang.String;", 0x401, NULL, NULL },
    { "getRawUdfValue", NULL, "Ljava.lang.String;", 0x0, NULL, NULL },
    { "addUdfValueWithOrgOssPdfreporterEngineQueryCoresqlModelIUdfValueType:", "addUdfValue", "V", 0x0, NULL, NULL },
    { "resolveTypeWithNSString:", "resolveType", "Ljava.lang.Class;", 0x0, NULL, "(Ljava/lang/String;)Ljava/lang/Class<*>;" },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "logger", "logger", 0x1a, "Ljava.util.logging.Logger;", &OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_logger, NULL, .constantValue.asLong = 0 },
    { "udfValues_", NULL, 0x12, "Ljava.util.List;", NULL, "Ljava/util/List<Lorg/oss/pdfreporter/engine/query/coresql/model/IUdfValueType;>;", .constantValue.asLong = 0 },
    { "udfValuesMap_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/query/coresql/model/IUdfValueType;>;", .constantValue.asLong = 0 },
    { "currentRawUdfValue_", NULL, 0x2, "Ljava.lang.String;", NULL, NULL, .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver = { 2, "AbstractUdfValuesResolver", "org.oss.pdfreporter.engine.query.coresql.model", NULL, 0x401, 11, methods, 4, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver;
}

@end

void OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_init(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver *self) {
  NSObject_init(self);
  self->udfValues_ = new_JavaUtilArrayList_init();
  self->udfValuesMap_ = new_JavaUtilHashMap_init();
  self->currentRawUdfValue_ = nil;
  [((JavaUtilLoggingLogger *) nil_chk(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_logger)) finerWithNSString:NSString_formatWithNSString_withNSObjectArray_(@"UdfValuesResolver: %s", [IOSObjectArray newArrayWithObjects:(id[]){ [[self getClass] getSimpleName] } count:1 type:NSObject_class_()])];
}

void OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_assertAndLoadUdfValuesWithOrgOssPdfreporterSqlIConnection_withNSString_(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver *self, id<OrgOssPdfreporterSqlIConnection> connection, NSString *rawUdfValue) {
  if (self->currentRawUdfValue_ == nil) {
    self->currentRawUdfValue_ = rawUdfValue;
    [((JavaUtilLoggingLogger *) nil_chk(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver_logger)) finestWithNSString:NSString_formatWithNSString_withNSObjectArray_(@"raw udf value: %s", [IOSObjectArray newArrayWithObjects:(id[]){ rawUdfValue } count:1 type:NSObject_class_()])];
    [self processRawUdfValueWithNSString:rawUdfValue];
  }
  else {
    if (![self->currentRawUdfValue_ isEqual:rawUdfValue]) {
      @throw new_JavaLangIllegalArgumentException_initWithNSString_(NSString_formatWithNSString_withNSObjectArray_(@"UdfValue may not change for the same record (currentValue: %s, rawUdfValue: %s", [IOSObjectArray newArrayWithObjects:(id[]){ rawUdfValue } count:1 type:NSObject_class_()]));
    }
  }
  if ([((id<JavaUtilList>) nil_chk(self->udfValues_)) isEmpty] && rawUdfValue != nil) {
    [self resolveUdfValuesWithOrgOssPdfreporterSqlIConnection:connection];
  }
  for (id<OrgOssPdfreporterEngineQueryCoresqlModelIUdfValueType> __strong value in self->udfValues_) {
    (void) [((id<JavaUtilMap>) nil_chk(self->udfValuesMap_)) putWithId:[((id<OrgOssPdfreporterEngineQueryCoresqlModelIUdfValueType>) nil_chk(value)) getName] withId:value];
  }
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgOssPdfreporterEngineQueryCoresqlModelAbstractUdfValuesResolver)
