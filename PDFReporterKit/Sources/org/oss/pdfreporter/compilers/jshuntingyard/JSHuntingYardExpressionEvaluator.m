//
//  Generated by the J2ObjC translator.  DO NOT EDIT!
//  source: ../pdfreporter-core/src/org/oss/pdfreporter/compilers/jshuntingyard/JSHuntingYardExpressionEvaluator.java
//

#include "IOSClass.h"
#include "IOSObjectArray.h"
#include "J2ObjC_source.h"
#include "java/lang/Integer.h"
#include "java/util/HashMap.h"
#include "java/util/List.h"
#include "java/util/Map.h"
#include "java/util/Set.h"
#include "java/util/logging/Logger.h"
#include "org/oss/pdfreporter/compilers/ExpressionParseException.h"
#include "org/oss/pdfreporter/compilers/IExpressionElement.h"
#include "org/oss/pdfreporter/compilers/SingleChunkExpressionFactory.h"
#include "org/oss/pdfreporter/compilers/SingleChunkTextTypeFactory.h"
#include "org/oss/pdfreporter/compilers/jshuntingyard/JSHuntingYardExpressionEvaluator.h"
#include "org/oss/pdfreporter/compilers/jshuntingyard/JSHuntingYardExpressionFactory.h"
#include "org/oss/pdfreporter/engine/JRException.h"
#include "org/oss/pdfreporter/engine/JRExpression.h"
#include "org/oss/pdfreporter/engine/JRExpressionChunk.h"
#include "org/oss/pdfreporter/engine/JRValueParameter.h"
#include "org/oss/pdfreporter/engine/JRVariable.h"
#include "org/oss/pdfreporter/engine/design/JRSourceCompileTask.h"
#include "org/oss/pdfreporter/engine/fill/JREvaluator.h"
#include "org/oss/pdfreporter/engine/fill/JRFillField.h"
#include "org/oss/pdfreporter/engine/fill/JRFillVariable.h"

@interface OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator () {
 @public
  id<JavaUtilMap> m_parameters_;
  id<JavaUtilMap> m_fields_;
  id<JavaUtilMap> m_variables_;
  id<JavaUtilMap> m_expressions_;
}

- (id<OrgOssPdfreporterCompilersIExpressionElement>)buildExpressionWithOrgOssPdfreporterEngineJRExpression:(id<OrgOssPdfreporterEngineJRExpression>)expression
                                                                                                   withInt:(jint)expressionId;

@end

J2OBJC_FIELD_SETTER(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator, m_parameters_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator, m_fields_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator, m_variables_, id<JavaUtilMap>)
J2OBJC_FIELD_SETTER(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator, m_expressions_, id<JavaUtilMap>)

inline JavaUtilLoggingLogger *OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_get_logger();
static JavaUtilLoggingLogger *OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_logger;
J2OBJC_STATIC_FIELD_OBJ_FINAL(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator, logger, JavaUtilLoggingLogger *)

__attribute__((unused)) static id<OrgOssPdfreporterCompilersIExpressionElement> OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_buildExpressionWithOrgOssPdfreporterEngineJRExpression_withInt_(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator *self, id<OrgOssPdfreporterEngineJRExpression> expression, jint expressionId);

J2OBJC_INITIALIZED_DEFN(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator)

@implementation OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator

- (void)initializeWithDefaultsWithOrgOssPdfreporterEngineDesignJRSourceCompileTask:(OrgOssPdfreporterEngineDesignJRSourceCompileTask *)sourceTask {
  if ([((OrgOssPdfreporterEngineDesignJRSourceCompileTask *) nil_chk(sourceTask)) getParametersMap] != nil) {
    [((id<JavaUtilMap>) nil_chk(m_parameters_)) clear];
    for (NSString * __strong key in nil_chk([((id<JavaUtilMap>) nil_chk([sourceTask getParametersMap])) keySet])) {
      (void) [m_parameters_ putWithId:key withId:nil];
    }
  }
  if ([sourceTask getFieldsMap] != nil) {
    [((id<JavaUtilMap>) nil_chk(m_fields_)) clear];
    for (NSString * __strong key in nil_chk([((id<JavaUtilMap>) nil_chk([sourceTask getFieldsMap])) keySet])) {
      (void) [m_fields_ putWithId:key withId:nil];
    }
  }
  if ([sourceTask getVariables] != nil) {
    [((id<JavaUtilMap>) nil_chk(m_variables_)) clear];
    {
      IOSObjectArray *a__ = [sourceTask getVariables];
      id<OrgOssPdfreporterEngineJRVariable> const *b__ = ((IOSObjectArray *) nil_chk(a__))->buffer_;
      id<OrgOssPdfreporterEngineJRVariable> const *e__ = b__ + a__->size_;
      while (b__ < e__) {
        id<OrgOssPdfreporterEngineJRVariable> var = *b__++;
        (void) [m_variables_ putWithId:[((id<OrgOssPdfreporterEngineJRVariable>) nil_chk(var)) getName] withId:nil];
      }
    }
  }
}

- (void)parseExpressionsWithOrgOssPdfreporterEngineDesignJRSourceCompileTask:(OrgOssPdfreporterEngineDesignJRSourceCompileTask *)sourceTask {
  [((id<JavaUtilMap>) nil_chk(m_expressions_)) clear];
  id<JavaUtilList> expressions = [((OrgOssPdfreporterEngineDesignJRSourceCompileTask *) nil_chk(sourceTask)) getExpressions];
  for (id<OrgOssPdfreporterEngineJRExpression> __strong expression in nil_chk(expressions)) {
    JavaLangInteger *id_ = [sourceTask getExpressionIdWithOrgOssPdfreporterEngineJRExpression:expression];
    (void) [m_expressions_ putWithId:id_ withId:OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_buildExpressionWithOrgOssPdfreporterEngineJRExpression_withInt_(self, expression, [((JavaLangInteger *) nil_chk(id_)) intValue])];
  }
}

- (void)customizedInitWithJavaUtilMap:(id<JavaUtilMap>)parametersMap
                      withJavaUtilMap:(id<JavaUtilMap>)fieldsMap
                      withJavaUtilMap:(id<JavaUtilMap>)variablesMap {
  if (parametersMap != nil) {
    [((id<JavaUtilMap>) nil_chk(m_parameters_)) putAllWithJavaUtilMap:parametersMap];
  }
  if (fieldsMap != nil) {
    [((id<JavaUtilMap>) nil_chk(m_fields_)) putAllWithJavaUtilMap:fieldsMap];
  }
  if (variablesMap != nil) {
    [((id<JavaUtilMap>) nil_chk(m_variables_)) putAllWithJavaUtilMap:variablesMap];
  }
}

- (id)evaluateWithInt:(jint)id_ {
  return [((id<JavaUtilMap>) nil_chk(m_expressions_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(id_)] ? [((id<OrgOssPdfreporterCompilersIExpressionElement>) nil_chk([m_expressions_ getWithId:JavaLangInteger_valueOfWithInt_(id_)])) getValue] : nil;
}

- (id)evaluateOldWithInt:(jint)id_ {
  return [((id<JavaUtilMap>) nil_chk(m_expressions_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(id_)] ? [((id<OrgOssPdfreporterCompilersIExpressionElement>) nil_chk([m_expressions_ getWithId:JavaLangInteger_valueOfWithInt_(id_)])) getOldValue] : nil;
}

- (id)evaluateEstimatedWithInt:(jint)id_ {
  return [((id<JavaUtilMap>) nil_chk(m_expressions_)) containsKeyWithId:JavaLangInteger_valueOfWithInt_(id_)] ? [((id<OrgOssPdfreporterCompilersIExpressionElement>) nil_chk([m_expressions_ getWithId:JavaLangInteger_valueOfWithInt_(id_)])) getEsimatedValue] : nil;
}

- (id<OrgOssPdfreporterEngineJRValueParameter>)getParameterWithNSString:(NSString *)name {
  return [((id<JavaUtilMap>) nil_chk(m_parameters_)) getWithId:name];
}

- (OrgOssPdfreporterEngineFillJRFillField *)getFieldWithNSString:(NSString *)name {
  return [((id<JavaUtilMap>) nil_chk(m_fields_)) getWithId:name];
}

- (OrgOssPdfreporterEngineFillJRFillVariable *)getVariableWithNSString:(NSString *)name {
  return [((id<JavaUtilMap>) nil_chk(m_variables_)) getWithId:name];
}

- (id<OrgOssPdfreporterCompilersIExpressionElement>)buildExpressionWithOrgOssPdfreporterEngineJRExpression:(id<OrgOssPdfreporterEngineJRExpression>)expression
                                                                                                   withInt:(jint)expressionId {
  return OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_buildExpressionWithOrgOssPdfreporterEngineJRExpression_withInt_(self, expression, expressionId);
}

J2OBJC_IGNORE_DESIGNATED_BEGIN
- (instancetype)init {
  OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_init(self);
  return self;
}
J2OBJC_IGNORE_DESIGNATED_END

+ (void)initialize {
  if (self == [OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator class]) {
    OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_logger = JavaUtilLoggingLogger_getLoggerWithNSString_([OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_class_() getName]);
    J2OBJC_SET_INITIALIZED(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator)
  }
}

+ (const J2ObjcClassInfo *)__metadata {
  static const J2ObjcMethodInfo methods[] = {
    { "initializeWithDefaultsWithOrgOssPdfreporterEngineDesignJRSourceCompileTask:", "initializeWithDefaults", "V", 0x1, "Lorg.oss.pdfreporter.engine.JRException;", NULL },
    { "parseExpressionsWithOrgOssPdfreporterEngineDesignJRSourceCompileTask:", "parseExpressions", "V", 0x1, "Lorg.oss.pdfreporter.engine.JRException;", NULL },
    { "customizedInitWithJavaUtilMap:withJavaUtilMap:withJavaUtilMap:", "customizedInit", "V", 0x4, "Lorg.oss.pdfreporter.engine.JRException;", "(Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/fill/IJRFillParameter;>;Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/fill/JRFillField;>;Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/fill/JRFillVariable;>;)V" },
    { "evaluateWithInt:", "evaluate", "Ljava.lang.Object;", 0x4, "Ljava.lang.Throwable;", NULL },
    { "evaluateOldWithInt:", "evaluateOld", "Ljava.lang.Object;", 0x4, "Ljava.lang.Throwable;", NULL },
    { "evaluateEstimatedWithInt:", "evaluateEstimated", "Ljava.lang.Object;", 0x4, "Ljava.lang.Throwable;", NULL },
    { "getParameterWithNSString:", "getParameter", "Lorg.oss.pdfreporter.engine.JRValueParameter;", 0x1, NULL, NULL },
    { "getFieldWithNSString:", "getField", "Lorg.oss.pdfreporter.engine.fill.JRFillField;", 0x1, NULL, NULL },
    { "getVariableWithNSString:", "getVariable", "Lorg.oss.pdfreporter.engine.fill.JRFillVariable;", 0x1, NULL, NULL },
    { "buildExpressionWithOrgOssPdfreporterEngineJRExpression:withInt:", "buildExpression", "Lorg.oss.pdfreporter.compilers.IExpressionElement;", 0x2, "Lorg.oss.pdfreporter.engine.JRException;", NULL },
    { "init", "JSHuntingYardExpressionEvaluator", NULL, 0x1, NULL, NULL },
  };
  static const J2ObjcFieldInfo fields[] = {
    { "logger", "logger", 0x1a, "Ljava.util.logging.Logger;", &OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_logger, NULL, .constantValue.asLong = 0 },
    { "m_parameters_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/JRValueParameter;>;", .constantValue.asLong = 0 },
    { "m_fields_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/fill/JRFillField;>;", .constantValue.asLong = 0 },
    { "m_variables_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/String;Lorg/oss/pdfreporter/engine/fill/JRFillVariable;>;", .constantValue.asLong = 0 },
    { "m_expressions_", NULL, 0x12, "Ljava.util.Map;", NULL, "Ljava/util/Map<Ljava/lang/Integer;Lorg/oss/pdfreporter/compilers/IExpressionElement;>;", .constantValue.asLong = 0 },
  };
  static const J2ObjcClassInfo _OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator = { 2, "JSHuntingYardExpressionEvaluator", "org.oss.pdfreporter.compilers.jshuntingyard", NULL, 0x1, 11, methods, 5, fields, 0, NULL, 0, NULL, NULL, NULL };
  return &_OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator;
}

@end

id<OrgOssPdfreporterCompilersIExpressionElement> OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_buildExpressionWithOrgOssPdfreporterEngineJRExpression_withInt_(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator *self, id<OrgOssPdfreporterEngineJRExpression> expression, jint expressionId) {
  IOSObjectArray *designExpressionChunks = [((id<OrgOssPdfreporterEngineJRExpression>) nil_chk(expression)) getChunks];
  @try {
    jboolean singleChunk = (designExpressionChunks == nil || designExpressionChunks->size_ == 1);
    if (designExpressionChunks != nil && designExpressionChunks->size_ > 0) {
      if (singleChunk) {
        id<OrgOssPdfreporterCompilersIExpressionElement> result = OrgOssPdfreporterCompilersSingleChunkExpressionFactory_buildExpressionWithOrgOssPdfreporterCompilersIDataHolder_withOrgOssPdfreporterEngineJRExpressionChunk_(self, IOSObjectArray_Get(designExpressionChunks, 0));
        if (result == nil) {
          [((JavaUtilLoggingLogger *) nil_chk(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_logger)) warningWithNSString:JreStrcat("$$", @"SingleChunk (Textconstant / Variable) expressions should be handled without an expression evaluator: ", [((id<OrgOssPdfreporterEngineJRExpressionChunk>) nil_chk(IOSObjectArray_Get(designExpressionChunks, 0))) getText])];
          return OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionFactory_buildExpressionWithOrgOssPdfreporterCompilersIDataHolder_withOrgOssPdfreporterEngineJRExpressionChunkArray_withInt_(self, designExpressionChunks, expressionId);
        }
        return result;
      }
      else {
        return OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionFactory_buildExpressionWithOrgOssPdfreporterCompilersIDataHolder_withOrgOssPdfreporterEngineJRExpressionChunkArray_withInt_(self, designExpressionChunks, expressionId);
      }
    }
    return OrgOssPdfreporterCompilersSingleChunkTextTypeFactory_buildExpressionWithNSString_(@"null");
  }
  @catch (OrgOssPdfreporterCompilersExpressionParseException *e) {
    @throw new_OrgOssPdfreporterEngineJRException_initWithNSException_(e);
  }
}

void OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_init(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator *self) {
  OrgOssPdfreporterEngineFillJREvaluator_init(self);
  self->m_parameters_ = new_JavaUtilHashMap_init();
  self->m_fields_ = new_JavaUtilHashMap_init();
  self->m_variables_ = new_JavaUtilHashMap_init();
  self->m_expressions_ = new_JavaUtilHashMap_init();
}

OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator *new_OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_init() {
  J2OBJC_NEW_IMPL(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator, init)
}

OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator *create_OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator_init() {
  J2OBJC_CREATE_IMPL(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator, init)
}

J2OBJC_CLASS_TYPE_LITERAL_SOURCE(OrgOssPdfreporterCompilersJshuntingyardJSHuntingYardExpressionEvaluator)
